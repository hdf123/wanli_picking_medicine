<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>修改密码</title>
		<link rel="stylesheet" href="../../css/base.css" />
		<link rel="stylesheet" href="../../css/iconfont.css" />
		<link rel="stylesheet" href="../../css/layout.css" />
		<link rel="stylesheet" href="css/change_password.css" />
		<script src="../../js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="../../js/md5.js"></script>
		<script src="../../js/ajaxs.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		<header class="headersd">
			<div class="iconfont icon-houtui"></div>
			<div>修改密码</div>
			<div></div>
		</header>
		<section class="sets">
			<div>
				<div>
					<input type="password" id="password" placeholder="请输入原始密码" value="ad123456" />
				</div>
				<div>
					<input type="password" id="newPassword" placeholder="请输入新密码" value="ad123456" />
				</div>
				<div>
					<input type="password" id="newPassword1" placeholder="请确认更改密码" value="ad123456" />
				</div>
				<div id="determine">确定</div>
			</div>
		</section>
		
		
<script type="text/javascript">
	$(function(){
		backs("javascript:history.back(-1)");//返回上一页加动画
		$("#determine").click(function(){
			console.log($("#newPassword").val());
			var myreg=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z_]{8,16}$/;//密码正则
			myreg.test($("#newPassword").val())?funcel():alert("密码格式错误！");
			function funcel(){
				$("#newPassword").val()==$("#newPassword1").val()?funa():alert("新密码输入不一致,请重新输入");
				function funa(){
					var parameter={
						password:hex_md5($("#password").val()),
						newPassword:hex_md5($("#newPassword").val())
					}
					ajaxsd("user/updatePassword",'post',parameter,function(data){
						console.log(data);
						if(data.success==true){
							alert("密码修改成功,请重新登录！");
							window.location.href="../login/login.html";
						}
					},function(err){
						console.log(err);
					})
				}
			}
		})
	})
</script>
	</body>
</html>

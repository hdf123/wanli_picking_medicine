<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>意见反馈</title>
		<link rel="stylesheet" href="../../css/base.css" />
		<link rel="stylesheet" href="../../css/iconfont.css" />
		<link rel="stylesheet" href="../../css/layout.css" />
		<link rel="stylesheet" href="css/feedback.css" />
		<script src="../../js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/ajaxs.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		<header class="headersd">
			<div class="iconfont icon-houtui" onclick="javascript:history.back(-1);"></div>
			<div>意见反馈</div>
			<div>提交</div>
		</header>
		<section class="sets">
			<div>
				<div class="feeda">
					<div class="iconfont icon-danxuankuang">
						<span>功能异常：功能故障或不可用</span>
					</div>
					<div class="iconfont icon-danxuankuang">
						<span>安全问题：密码、隐私、欺诈等</span>
					</div>
					<div class="iconfont icon-danxuankuang">
						<span>产品优化建议</span>
					</div>
					<div class="iconfont icon-danxuankuang">
						<span>其它</span>
					</div>
				</div>
				<div class="feedb">请补充详细问题和意见</div>
				<textarea class="feedc" placeholder="请输入您的宝贵建议和意见！" ></textarea>
				<div class="feedd">
					<div>
						请提供相关问题的截图或照片（最多4张）
					</div>
		            <div class="feede">
		                <div class="feedf">
		                    <label>
		                    	<img src="../../img/eq_06.png" class="asd"/>
		                        <input type="file" class="imgFile" id="studyPhoto1" accept="image/*" multiple >
		                    </label>
		                </div>
		            </div>
				</div>
			</div>
			
			
		</section>
		
<script type="text/javascript">
	$(function(){
	//上传图片
		$(".feede").on('change',".imgFile",function () {
		   //获取上传文件的数量
		   var countFiles = $(this)[0].files.length;
		   console.log(countFiles);
		   if(countFiles>4){
		   		alert("最多只能上传4张图片");
		   }else{
			   	var imgPath = $(this)[0].value;
			   	var extn = imgPath.substring(imgPath.lastIndexOf('.') + 1).toLowerCase();
			   	$(".feede").empty();
			   	$(".feede").append(`<div class="ks"></div>
									<div class="kt">
										<div>重新上传</div>
									</div>`);
			   	var image_holder = $(".feede>div:eq(0)");
			   	image_holder.empty();
			   	if (extn == "gif" || extn == "png" || extn == "jpg" || extn == "jpeg") {
			   	    if (typeof (FileReader) != "undefined") {
			   	        // 循环所有要上传的图片
			   	        for (var i = 0; i < countFiles; i++) {
			   	            var reader = new FileReader();
			   	            reader.onload = function (e) {
			   	            	image_holder.append($(`<div class="asd"><img src=${e.target.result}></div>`))
			   	            }
			   	            image_holder.show();
			   	            reader.readAsDataURL($(this)[0].files[i]);
			   	        }
			   	    } else {
			   	        alert("你的浏览器不支持FileReader！");
			   	    }
			   	} else {
			   	    alert("请选择图像文件。");
			   	}
		   }
		});
	//重新上传图片
	    $(".feede").on("click",".kt>div",function(){
	    	console.log(111);
	    	$(".feede").empty();
		   	$(".feede").append(`<div class="feedf">
				                    <label>
				                    	<img src="../../img/eq_06.png" class="asd"/>
				                        <input type="file" class="imgFile" id="studyPhoto1" accept="image/*" multiple >
				                    </label>
				                </div>`);
	    })
	})
</script>
	</body>
</html>
